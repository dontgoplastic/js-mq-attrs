{"version":3,"file":null,"sources":["../node_modules/camelcase/index.js","../node_modules/domready/ready.js","../src/js-mq-attrs.js"],"sourcesContent":["'use strict';\n\nfunction preserveCamelCase(str) {\n\tvar isLastCharLower = false;\n\n\tfor (var i = 0; i < str.length; i++) {\n\t\tvar c = str.charAt(i);\n\n\t\tif (isLastCharLower && (/[a-zA-Z]/).test(c) && c.toUpperCase() === c) {\n\t\t\tstr = str.substr(0, i) + '-' + str.substr(i);\n\t\t\tisLastCharLower = false;\n\t\t\ti++;\n\t\t} else {\n\t\t\tisLastCharLower = (c.toLowerCase() === c);\n\t\t}\n\t}\n\n\treturn str;\n}\n\nmodule.exports = function () {\n\tvar str = [].map.call(arguments, function (str) {\n\t\treturn str.trim();\n\t}).filter(function (str) {\n\t\treturn str.length;\n\t}).join('-');\n\n\tif (!str.length) {\n\t\treturn '';\n\t}\n\n\tif (str.length === 1) {\n\t\treturn str.toLowerCase();\n\t}\n\n\tif (!(/[_.\\- ]+/).test(str)) {\n\t\tif (str === str.toUpperCase()) {\n\t\t\treturn str.toLowerCase();\n\t\t}\n\n\t\tif (str[0] !== str[0].toLowerCase()) {\n\t\t\treturn str[0].toLowerCase() + str.slice(1);\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tstr = preserveCamelCase(str);\n\n\treturn str\n\t.replace(/^[_.\\- ]+/, '')\n\t.toLowerCase()\n\t.replace(/[_.\\- ]+(\\w|$)/g, function (m, p1) {\n\t\treturn p1.toUpperCase();\n\t});\n};\n","/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  if (typeof module != 'undefined') module.exports = definition()\n  else if (typeof define == 'function' && typeof define.amd == 'object') define(definition)\n  else this[name] = definition()\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState)\n\n\n  if (!loaded)\n  doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener)\n    loaded = 1\n    while (listener = fns.shift()) listener()\n  })\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn)\n  }\n\n});\n","import camelcase from 'camelcase';\nimport mq from 'js-mq';\nimport domready from 'domready';\n\nconst config = {\n  prefix: 'data-mq-',\n  identifyingClass: 'js-mq',\n  propValDelimiter: '--'\n};\n\nconst elMap = new Map();\nconst frameUpdatesAdding = new Map();\nconst frameUpdatesRemoving = new Map();\n\n\nfunction collectElements() {\n\n  const els = Array.from(document.querySelectorAll('.' + config.identifyingClass));\n\n  if (els.length === 0) return;\n\n  for (const el of els) {\n    if (elMap.has(el) === false) {\n      elMap.set(el, parseElementRules(el));\n    }\n    // @TODO allow re-eval of previously added elements\n    el.classList.remove(config.identifyingClass);\n  }\n\n  for (const [el, rules] of elMap.entries()) {\n    for (const rule of rules) {\n      mq.on(rule.queryName, () => {\n        scheduleForUpdate(el, 'add', rule);\n      }, () => {\n        scheduleForUpdate(el, 'remove', rule);\n      });\n    }\n  }\n\n}\n\n\nfunction processUpdates() {\n  for (const [el, updates] of frameUpdatesRemoving.entries()) {\n    for (const update of updates) {\n      removeElementRule(update);\n    }\n  }\n  for (const [el, updates] of frameUpdatesAdding.entries()) {\n    for (const update of updates) {\n      addElementRule(update);\n    }\n  }\n\n  frameUpdatesAdding.clear();\n  frameUpdatesRemoving.clear();\n  updating = false;\n}\n\n\nlet updating = false;\nfunction scheduleForUpdate(el, type, rule) {\n\n  const targetMap = type === 'add' ? frameUpdatesAdding : frameUpdatesRemoving;\n\n  if (updating === false) {\n    updating = true;\n    window.requestAnimationFrame(processUpdates);\n  }\n  if (targetMap.has(el) === false) {\n    targetMap.set(el, []);\n  }\n  targetMap.get(el).push(rule);\n}\n\n\nfunction parseElementRules(el) {\n\n  const rules = [];\n  const attrs = el.attributes;\n  const attrsLength = attrs.length;\n\n  for (let i = 0; i < attrsLength; i++) {\n    const attr = attrs[i];\n    const attrName = attr.name;\n\n    if (attrName.startsWith(config.prefix)) {\n\n      // 'data-mq-xs--class' => ['xs', 'class']\n      const arr = attrName.substring(config.prefix.length).split(config.propValDelimiter);\n\n      const queryName = arr[0];\n      const property = arr[1];\n      const value = attr.value;\n\n      rules.push({el, queryName, property, value});\n    }\n  }\n\n  return rules;\n}\n\ndomready(collectElements);\n\n\n\n\nfunction parseStyleString(value) {\n  return (value.indexOf(';') === -1 ? [value] : value.split(';'))\n      .map((s) => {\n        if (s) {\n          const arr = s.split(':');\n          return {\n            property: arr[0],\n            value: arr[1]\n          }\n        } else {\n          return null;\n        }\n      })\n      .filter(o => o !== null);\n}\n\nfunction clearElementStyles(el, styles) {\n  applyElementStyles(el, styles, true);\n}\n\nfunction applyElementStyles(el, styles, remove = false) {\n  if (typeof styles === 'string') {\n    styles = parseStyleString(styles);\n  }\n  for (const style of styles) {\n    const propertyCamelCase = camelcase(style.property);\n    el.style[propertyCamelCase] = remove ? '' : style.value;\n  }\n}\n\nfunction removeElementRule({el, queryName, property, value}) {\n  switch (property) {\n    case 'style':\n      clearElementStyles(el, value);\n      break;\n    default:\n      el.removeAttribute(property);\n      break;\n  }\n}\nfunction addElementRule({el, queryName, property, value}) {\n  switch (property) {\n    case 'style':\n      applyElementStyles(el, value);\n      break;\n    default:\n      el.setAttribute(property, value);\n      break;\n  }\n}\n\n\nexport default {\n  config,\n  registerNewEls: collectElements\n};"],"names":["config","elMap","Map","frameUpdatesAdding","frameUpdatesRemoving","collectElements","els","Array","from","document","querySelectorAll","identifyingClass","length","el","has","set","parseElementRules","classList","remove","rules","entries","rule","on","queryName","processUpdates","updates","update","clear","updating","scheduleForUpdate","type","targetMap","requestAnimationFrame","get","push","attrs","attributes","attrsLength","i","attr","attrName","name","startsWith","prefix","arr","substring","split","propValDelimiter","property","value","domready","parseStyleString","indexOf","map","s","filter","o","clearElementStyles","styles","applyElementStyles","style","propertyCamelCase","camelcase","removeElementRule","removeAttribute","addElementRule","setAttribute"],"mappings":"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"}